#!/usr/bin/perl

my $fd_source = 'fd -t f \'.tex$\' . -0';
my $find_source = 'find . -type f -name \'*.tex\' -print0';
my $replace_linux = 'xargs -0 sed -i"" -e "s/、/，/g" -e "s/。/．/g";';
my $replace_mac = 'xargs -0 gsed -i"" -e "s/、/，/g" -e "s/。/．/g";';

$replace = '';

if ($^O eq 'darwin') {
    if (!system('fd -V >/dev/null')) {
        $replace = $fd_source . '|' . $replace_mac;
    } else {
        $replace = $find_source . '|' . $replace_mac;
    }

    $pdf_previewer = '/Applications/Skim.app/Contents/MacOS/Skim';
} elsif ($^O eq 'linux') {
    if (!system('fd -V >/dev/null')) {
        $replace = $fd_source . '|' . $replace_linux;
    } else {
        $replace = $find_source . '|' . $replace_linux;
    }

    $pdf_previewer = 'zathura';
}
# TODO: add configuration for other OSs

$latex = $replace . 'uplatex -kanji=utf-8 -halt-on-error -interaction=nonstopmode -file-line-error -synctex=1';
$latex_silent = $replace . 'uplatex -kanji=utf-8 -halt-on-error -interaction=batchmode -file-line-error -synctex=1';
$lualatex = $replace . 'lualatex -interaction=nonstopmode -synctex=1S';
$dvipdf = 'dvipdfmx -o %D %S';
$bibtex = 'upbibtex';
$makeindex = 'mendex';

$pdf_mode = 3;
$max_repeat = 5;
$out_dir = 'out';

$pvc_view_file_via_temporary = 0;

